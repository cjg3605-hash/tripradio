# 🦋 NAVI - Product Requirements Document (PRD)
*AI 기반 개인 맞춤형 관광 가이드 서비스*

## 1. 프로젝트 개요

### 1.1 제품명
**NAVI** (AI Tour Guide)

### 1.2 제품 비전
전 세계 모든 관광명소를 대상으로 **AI가 실시간으로 생성하는** 개인 맞춤형 가이드로, "마치 전문 가이드와 함께 여행하는 듯한" 깊이 있는 문화 체험을 제공한다.

### 1.3 핵심 차별화 포인트
1. **알함브라 수준의 스토리텔링**: 실제 역사 인물과 전설을 조합한 드라마틱한 현장감, 감각적 디테일
2. **3페이지 완벽 구조**: 개요 → 관람동선 → 실시간가이드 (실제 코드 구조와 동기화)
3. **100% 실시간 AI 생성**: 더미데이터 없이 Gemini 기반 개인화
4. **글로벌 다국어 지원**: 5개 언어 완전 현지화
5. **오프라인/PWA**: 언제 어디서나 접근 가능

---

## 2. 타깃 사용자
- 글로벌 여행객 (20~50대)
- 모바일 중심, 즉시성/개인화 중시
- 문화적 깊이와 현지화된 설명을 원하는 사용자
- 가족/커플/솔로/단체 등 다양한 동행자

---

## 3. 핵심 기능 상세

### 3.1 현재 구현 기능
- **홈/검색**: 실시간 AI 기반 명소 검색, 다국어 UI, 모바일 최적화
- **AI 가이드 생성**: 3페이지(개요/동선/실시간가이드) 완전 자동화, 사용자 프로필 반영
- **실시간 투어**: 챕터별 몰입형 스토리텔링, 한붓그리기 동선, 감각적 묘사
- **오프라인 저장**: 생성된 가이드 로컬 저장, 인터넷 없이 열람 가능
- **다국어 지원**: 5개 언어, 언어별 문화적 맥락 반영
- **PWA**: 오프라인, 홈화면 추가, 독립 실행
- **캐시/성능**: 30분 메모리 캐시, 평균 응답 10~15초

### 3.2 AI 시스템
- **Gemini 1.5 Flash 기반**
- 프롬프트: src/lib/ai/prompts.ts (createAutonomousGuidePrompt 등)
- 타입: GuideContent, UserProfile 등 실제 코드와 동기화
- route.steps와 realTimeGuide.chapters 완전 동기화(시스템 오류 방지)
- 언어별 프롬프트/품질 기준/최소 글자수 등 엄격 적용

### 3.3 UX 플로우
1. **홈 진입** → 언어 자동 감지/선택 → "어디로 가고 싶으신가요?" 검색
2. **검색** → AI 자동 추천 → 명소 선택 → "맞춤 가이드 생성 중..."
3. **3페이지 가이드**: [개요] ↔ [관람동선] ↔ [실시간가이드] 탭 이동
4. **실시간 투어**: 챕터별 스토리, 다음 이동 안내, 진행률 표시
5. **오프라인 저장/마이페이지**: 가이드 저장/관리

---

## 4. 기술 아키텍처
- **Frontend**: Next.js 14, TypeScript, TailwindCSS, PWA
- **AI**: Google Gemini 1.5 Flash, 프롬프트 엔지니어링
- **API**: Next.js API Routes, 캐시, 오류 처리
- **DB**: Supabase (옵션)
- **국제화**: next-i18next, 언어별 현지화

---

## 5. 향후 확장 계획
- TTS 오디오 가이드 (Google/ElevenLabs)
- 결제/구독 시스템 (Stripe)
- AR 정보 오버레이, 위치 기반 자동 안내
- 소셜 기능(공유, 후기), 그룹 투어
- 사용자 분석/통계, 성능 모니터링

---

## 6. 기타
- 실제 프롬프트/타입/구조/UX는 src/lib/ai/prompts.ts, src/app/guide 등 코드 참고
- 더 이상 없는 기능/플로우/설명은 문서에서 삭제함
