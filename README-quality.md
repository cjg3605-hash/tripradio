# 🎯 가이드 품질 검사 시스템

DB에 저장된 가이드들의 품질을 필요할 때마다 수동으로 검사하여 문제가 있는 데이터를 찾아내는 간단한 도구입니다.

## 🚀 사용법

### 1. 전체 가이드 품질 검사
```bash
npm run quality:check
```

모든 프로덕션 가이드를 검사하여 품질 점수를 확인하고 문제가 있는 가이드를 찾아냅니다.

**출력 예시:**
```
🎯 가이드 품질 검사 시작...

📊 총 45개 프로덕션 가이드 발견
🔍 [1/45] 경복궁 (ko) 검사 중...
   ✅ 87.3점 (good)
🔍 [2/45] 덕수궁 (ko) 검사 중...
   ❌ 42.1점 (poor)
🔍 [3/45] 창경궁 (ko) 검사 중...
   ✅ 91.2점 (excellent)
...

============================================================
📊 가이드 품질 검사 결과
============================================================
총 검사: 45개
평균 점수: 78.4점

🎯 품질 분포:
  🌟 우수 (90+):   12개 (26.7%)
  ✅ 양호 (75-89): 20개 (44.4%)
  ⚠️ 허용 (60-74): 10개 (22.2%)
  🔴 불량 (40-59): 2개 (4.4%)
  🚨 심각 (<40):  1개 (2.2%)

🚨 조치가 필요한 가이드:
  🔴 덕수궁 (ko): 42.1점
     문제: 내용 부족, 정확성 부족
  🚨 석촌호수 (en): 35.2점
     문제: 구조적 문제, 번역 오류

💡 추천사항:
  🔴 2개 가이드의 품질 개선이 필요합니다
  🚨 1개 가이드가 즉시 재생성이 필요합니다

🎉 품질 검사 완료!
```

### 2. 개별 가이드 상세 검사
```bash
# 한국어 가이드 검사
npm run quality:inspect 경복궁 ko

# 언어 생략시 기본값은 ko
npm run quality:inspect 경복궁

# 영어 가이드 검사
npm run quality:inspect 경복궁 en
```

특정 가이드의 상세 정보와 품질 상태를 확인합니다.

**출력 예시:**
```
🔍 경복궁 (ko) 상세 검사 중...

📍 위치: 경복궁
🌐 언어: ko
📅 생성: 2024-01-10 14:23:15
📅 수정: 2024-01-15 09:30:22
📊 품질 점수: 87.3점
📚 챕터 수: 8개

📋 챕터 목록:
  1. 경복궁 입구와 광화문
     내용: 892자
  2. 근정전 - 조선의 정전
     내용: 1,245자
  3. 사정전과 강녕전
     내용: 967자
  4. 경회루 - 연꽃이 피는 누각
     내용: 1,134자
  5. 향원정 - 아름다운 정자
     내용: 823자
  6. 건청궁 - 고종의 거처
     내용: 1,087자
  7. 국립고궁박물관
     내용: 756자
  8. 경복궁에서의 마무리
     내용: 645자

✅ 품질 상태: good
✅ 품질이 양호합니다
```

### 3. 도움말 보기
```bash
npm run quality:help
```

## 📊 품질 기준

| 점수 범위 | 등급 | 상태 | 권장 조치 |
|-----------|------|------|-----------|
| 90-100점 | 🌟 우수 | excellent | 현재 상태 유지 |
| 75-89점 | ✅ 양호 | good | 현재 상태 유지 |
| 60-74점 | ⚠️ 허용 가능 | acceptable | 모니터링 |
| 40-59점 | 🔴 불량 | poor | 품질 개선 필요 |
| 0-39점 | 🚨 심각 | critical | 즉시 재생성 필요 |

## 🔧 평가 기준

AI가 다음 요소들을 종합적으로 평가합니다:

1. **내용 완성도**: 필수 정보가 모두 포함되어 있는지
2. **정확성**: 사실적 오류나 부정확한 정보가 없는지  
3. **구조**: 챕터 구성이 논리적이고 완성되어 있는지
4. **언어 품질**: 문법, 어휘, 번역 품질이 적절한지

## ⚙️ 환경 설정

다음 환경 변수가 필요합니다:

```bash
# .env.local
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
GEMINI_API_KEY=your_gemini_api_key
```

## 💡 사용 시나리오

### 정기 점검
```bash
# 주 1회 정도 전체 검사 실행
npm run quality:check
```

### 새 가이드 추가 후
```bash
# 새로 추가한 가이드 확인
npm run quality:inspect "새로운관광지" ko
```

### 사용자 신고 후
```bash
# 문제 신고된 특정 가이드 확인
npm run quality:inspect "문제신고된곳" ko
```

### 번역 확인
```bash
# 다국어 버전 품질 확인
npm run quality:inspect 경복궁 en
npm run quality:inspect 경복궁 ja
npm run quality:inspect 경복궁 zh
```

## 🚨 문제 해결

### 환경 변수 오류
```
❌ GEMINI_API_KEY가 설정되지 않았습니다
```
→ `.env.local` 파일에서 API 키 확인

### 데이터베이스 연결 실패
```
❌ 가이드 조회 실패: Invalid API key
```
→ Supabase URL과 API 키 확인

### 가이드를 찾을 수 없음
```
❌ 가이드를 찾을 수 없습니다
```
→ 위치명과 언어 코드 확인 (정확한 이름 입력 필요)

---

이 도구를 사용하여 언제든 가이드 품질을 확인하고 문제가 있는 데이터를 쉽게 찾아낼 수 있습니다! 🎯