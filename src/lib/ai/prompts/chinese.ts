// 全世界所有场所的通用AI音频导游生成提示系统（改进版）

import { UserProfile } from '@/types/guide';
import { 
  LANGUAGE_CONFIGS, 
  LOCATION_TYPE_CONFIGS, 
  analyzeLocationType,
  getRecommendedSpotCount 
} from './index';
import type { OptimizedLocationContext } from '@/types/unified-location';

/**
 * 🎯 按位置类型生成质量验证标准
 */
function getQualityRequirementsByType(locationType: string): string {
  switch (locationType) {
    case 'palace':
      return `- **建筑数据**: 建筑高度、建造年代、柱数、面积等
- **皇室人物**: 具体君主姓名、在位期间、主要成就
- **建筑术语**: 檐角、斗拱、丹青、温突等准确术语`;
    case 'religious':
      return `- **宗教术语**: 法堂、塔、佛像、梵钟等准确名称
- **创建信息**: 创建年代、创建者、重建历史
- **宗教仪式**: 具体修行法、礼拜时间、仪式程序`;
    case 'historical':
      return `- **历史年代**: 准确年代、事件发生日期
- **历史人物**: 真实人物的具体行迹和成就
- **文物信息**: 出土年代、材质、尺寸、文物编号`;
    case 'nature':
      return `- **地质信息**: 形成年代、岩石种类、地质结构
- **生态数据**: 栖息动植物种数、面积、海拔高度
- **环境数值**: 年平均气温、降水量、湿度等`;
    case 'culinary':
      return `- **烹饪信息**: 烹饪时间、温度、材料比例
- **营养成分**: 卡路里、主要营养素、功效
- **历史信息**: 食物起源、地区变化过程`;
    default:
      return `- **具体数值**: 年度、尺寸、数量等可测量数据
- **可验证事实**: 基于官方记录、文献的信息
- **专业术语**: 相关领域的准确术语和概念`;
  }
}

/**
 * 🎯 按位置类型生成专业信息要求
 */
function getLocationSpecificRequirements(locationType: string): string {
  switch (locationType) {
    case 'palace':
      return `**🏰 宫殿专业解说标准:**
- **建筑等级**: 正殿→偏殿→寝殿顺序的空间布局和意义
- **皇室生活**: 具体仪式、日常作息、季节性活动
- **政治史**: 发生重大历史事件和决策的场所
- **工匠技艺**: 丹青、木构建筑、石雕技法的科学优秀性
- **象征体系**: 龙、凤凰等皇权象征物的布局和意义`;

    case 'religious':
      return `**🙏 宗教建筑专业解说标准:**
- **建筑象征**: 佛塔、法堂、钟楼等的宗教意义和布局
- **宗教哲学**: 该宗教的核心教义和修行法
- **艺术样式**: 佛像、唐卡、彩绘玻璃等的艺术价值
- **仪式空间**: 礼拜/法会进行方式和空间利用
- **灵性体验**: 冥想、祈祷的实际方法和效果`;

    case 'historical':
      return `**📚 历史遗迹专业解说标准:**
- **历史事实**: 年代、人物、事件的准确验证信息
- **人物故事**: 主要历史人物的具体行迹和成就
- **社会背景**: 当时社会状况、文化、经济背景
- **文物价值**: 出土文物、遗迹的学术和文化重要性
- **现实意义**: 历史给现在的教训和启示`;

    case 'nature':
      return `**🌿 自然生态专业解说标准:**
- **地质形成**: 数百万年的地形形成过程
- **生态系统**: 植物群-动物群间的相互作用和食物链
- **气候特征**: 微气候、季节变化、气象现象
- **保护价值**: 濒危物种、栖息地保护的重要性
- **可持续性**: 环境保护与旅游和谐发展方案`;

    case 'culinary':
      return `**🍽️ 饮食文化专业解说标准:**
- **烹饪科学**: 发酵、熟成、烹饪法的科学原理
- **食材**: 产地、质量标准、营养学特性
- **传统技法**: 代代相传的烹饪法和保存方式
- **口味调和**: 甜味、咸味、鲜味等的平衡和特征
- **饮食文化史**: 食物的历史由来和地域特色`;

    case 'cultural':
      return `**🎨 艺术文化专业解说标准:**
- **美术史**: 各时代美术思潮和艺术家地位
- **作品分析**: 技法、材料、构图、色彩的专业解读
- **文化背景**: 作品诞生的社会和文化背景
- **美学理论**: 美的标准、艺术哲学、鉴赏方法
- **现代价值**: 过去艺术给现代的灵感和意义`;

    case 'commercial':
      return `**🛍️ 商业文化专业解说标准:**
- **商圈形成史**: 市场、商街发展过程和经济背景
- **地方特产**: 原料、制造法、质量的优秀性
- **流通体系**: 传统/现代流通结构的变化
- **生活文化**: 商业活动对当地居民生活的影响
- **经济价值**: 对地区经济的贡献度和就业创造`;

    case 'modern':
      return `**🏗️ 现代建筑专业解说标准:**
- **结构工程**: 建筑技术、抗震设计、先进工法
- **设计哲学**: 建筑师的理念和设计意图
- **环保技术**: 能源效率、可持续建筑技法
- **城市规划**: 作为地标的作用和对城市发展的贡献
- **未来愿景**: 建筑所展示的未来城市面貌`;

    default:
      return `**🎯 综合旅游解说标准:**
- **多角度接近**: 历史、文化、自然、经济方面的平衡
- **实用信息**: 交通、设施、使用方法等游客便利
- **地区特色**: 与其他地方差异化的独特魅力
- **故事叙述**: 有趣且令人难忘的轶事和故事
- **综合价值**: 作为旅游地的综合魅力和意义`;
  }
}

// 🌍 全世界通用音频导游示例 - 适用于各种场所类型的结构
const AUDIO_GUIDE_EXAMPLE = {
  content: {
    overview: {
      title: "[场所名 - 动态生成]",
      location: "📍 [仅地区名简洁]",
      keyFeatures: "✨ [核心特征关键词]",
      background: "🏛️ [一行意义概括]",
      narrativeTheme: "[该场所独特的故事和体验价值]",
      keyFacts: [
        { title: "[特征/历史要素1]", description: "[具体事实信息]" },
        { title: "[特征/历史要素2]", description: "[文化/技术意义]" }
      ],
      visitInfo: {
        duration: "[参观所需时间]",
        difficulty: "[可达性/体力要求度]",
        season: "[最佳参观时期]"
      }
    },
    safetyWarnings: "[场所特殊规定或注意事项 - 宗教设施礼拜时间、自然地区安全规则、博物馆摄影规定等]",
    mustVisitSpots: "🎯 #[核心景点1] #[核心景点2] #[核心景点3] #[核心景点4] #[核心景点5]",
    route: {
      steps: [
        { step: 1, location: "[起点/入口/售票处/站出口]", title: "[起点具体名称]" },
        { step: 2, location: "[主要地点1]", title: "[主要地点1名称]" },
        { step: 3, location: "[主要地点2]", title: "[主要地点2名称]" },
        { step: 4, location: "[主要地点3]", title: "[主要地点3名称]" },
        { step: 5, location: "[结束地点]", title: "[结束地点名称]" }
      ]
    },
    realTimeGuide: {
      chapters: [
        {
          id: 0,
          title: "[场所名] [入口]",
          narrative: "[该场所]是代表[地区/文化圈]的[场所性质]，蕴含着[独特价值/意义]的地方。现在展现在我们面前的景象，[具体现场描述 - 视觉特征、规模感、第一印象]唤起[情感反应]。仔细观察，[细节特征 - 材料、结构、色彩、质感等]展现了[技术/艺术特征]。那么，这[场所]为什么会有这样的[特殊特征]呢？原因就在于[历史/文化/地理背景]。根据[官方记录/研究资料]记载，[年代/时期][历史人物/团体]进行[具体行动/决定]，这不仅仅是为了[表面目的]，而是包含着[更深层的意图/背景]。实际上，通过[具体例子/证据]我们可以确认[现在的面貌/价值]。正是因为有了[相关者的努力/历史过程]，我们才能在此时此刻共同体验这[有意义的时刻/经历]。",
          nextDirection: "现在，让我们将这有意义的背景铭记在心，前往下一个地点吧。从这里朝[方向/路线]走约[距离/时间]，就会到达[下一个场所]。接下来，[下一地点的特色/期待要素]正等待着大家！"
        },
        {
          id: 1,
          title: "[主要地点1名称]",
          narrative: "[地点名]在[整体场所]内担任[角色/位置]的[性质/功能]。'[地点意义/名称由来]'的意思是[意义解释]，这里进行着[主要活动/功能]。由[具体结构/形态描述]构成，展现了[技术/艺术特征]。[内部/细节要素]包含着[象征性/功能性]，传达着[文化/历史意义]。",
          nextDirection: "参观完[当前地点]，现在朝[方向]前往[下一地点]。大约需要[距离/时间]。"
        },
        {
          id: 2,
          title: "[主要地点2名称]",
          narrative: "[地点名]是位于[位置特征]的具有[独特特征]的[空间/建筑物]。'[名称意义]'意思是'[意义解释]'，曾用于[用途/目的]。[结构特征 - 材料、技法、规模]展现了[时代/技术价值]。[特殊要素]根据[季节/时间段]呈现不同的[观赏要点]。",
          nextDirection: "如果充分欣赏了[当前地点]的[印象深刻的要素]，现在让我们前往[下一个目的地]。"
        }
      ]
    }
  }
};

// 类型定义
interface GuideContent {
  content: {
    overview: {
      title: string;
      location: string;
      keyFeatures: string;
      background: string;
      narrativeTheme: string;
      keyFacts: Array<{ title: string; description: string }>;
      visitInfo: {
        duration: string;
        difficulty: string;
        season: string;
      };
    };
    route: {
      steps: Array<{
        step: number;
        location: string;
        title: string;
      }>;
    };
    realTimeGuide: {
      chapters: Array<{
        id: number;
        title: string;
        narrative: string;
        nextDirection: string;
      }>;
    };
  };
}

// 各语言音频导游编写指南（改进版）
const AUDIO_GUIDE_INSTRUCTIONS = {
  zh: {
    style: `您是**唯一最优秀的自由行导游**。
    
**🎯 核心使命**: 您是在游览者身边像朋友一样交谈的**唯一自由行导游**。
从开始到结束，以一致的声音和个性，自然地引导，仿佛想在短时间内告诉游客关于该地区的一切。

**📝 绝对遵守事项**:

1. **完整的单一音频脚本生成（🚨 非常重要）**
   - narrative是一个完整的1500-1600字连续音频脚本
   - nextDirection是单独字段，仅负责到下一个场所的移动指导
   - 在narrative内部以自然流程整合所有内容
   
2. **整合的教育性故事叙述结构**
   - 背景知识说明 + **扩展的现场观察**（大纲 → 详细）→ 激发好奇心
   - 提供好奇心的答案 + 历史背景 → 人物故事预告
   - 真实人物/事件故事 → 以现实意义结尾
   - 所有内容整合到一个自然的narrative字段中
   
3. **基于事实的信息提供原则（🚨 非常重要）**
   - 🚨 绝对禁止: "各位"、"请想象"、"惊人的故事"、"绝妙的"、"稍等"
   - 🚨 绝对禁止: "这里"、"此处"等模糊指示词（必须使用具体场所名）
   - 🚨 绝对禁止: 没有场所名的一般性称呼或感叹词
   - 🚨 **绝对禁止: 推测、假设、未经验证的信息、夸张表达**
   - ✅ **必要原则: 仅使用可验证的事实** - 仅基于官方记录、文献、史书的信息
   - ✅ 必须包含: 具体数值、专有名词、物理特征、历史事实、技术信息
   - ✅ **事实表达法**: "根据记录"、"史书记载"、"官方文件显示"、"实际上"
   
4. **完整的内容构成（单一字段分量 - 每章1600字目标）**
   - narrative: 1500-1600字以上 - 背景知识 + 扩展现场观察 + 历史背景 + 人物故事的完整整合脚本
   - nextDirection: 200-300字以上 - 明确的移动路线和距离指导
   - **总计1800字以上的详细教育音频**（整合到单一narrative中，形成更自然的流程）

5. **自然的内部流程构成（🎯 核心改进点）**
   在narrative内部使用适合各场所和情况的自然连接词，创造流畅的流程:
   
   **现场观察 → 历史背景转换（多种模式）**:
   - "那么，在这一切之中隐藏着什么秘密呢？正是那个故事..."
   - "为什么如此特别呢？原因正是..."  
   - "会有什么历史呢？实际上这里是..."
   - "是什么造就了这样的景象呢？令人惊讶的是..."
   - "您不好奇吗？让我来告诉您..."
   - "会是什么故事呢？回顾历史..."
   
   **历史背景 → 人物故事转换（多种模式）**:
   - "在这段历史中有感人的人物，其中一位就是..."
   - "在这个过程中出现了令人惊叹的人物。实际上这个人..."
   - "当时有特殊的人物。例如..."
   - "在这一切的背后有人的努力，那个主角就是..."
   - "在历史的背后有有趣的人物。听听他们的故事..."
   - "在那个时代生活的人中特别值得记住的是..."

6. **彻底的事实验证原则（🚨 绝对遵守）**
   - **所有信息仅使用可验证的事实**: 基于官方记录、学术资料、历史文献
   - **humanStories严格标准**: 必须是历史上验证的真实人物和实际事件
   - **绝对禁止**: 虚构人物、编造轶事、推测性信息、夸张表达
   - **排除不确定信息**: 禁止"大概"、"推测"、"据说"等不确定表达
   - **强调事实性表达**: "根据记录"、"实际上"、"史书记载"、"官方文件显示"
   - **仅使用验证的数值**: 准确的年代、尺寸、数量等仅基于官方资料的数值`,
    
    examples: {
      diverse_connections: [
        "那么，在这美丽景象的背后隐藏着什么故事呢？",
        "您不好奇这座建筑为什么会这样建造吗？", 
        "令人惊讶的是，这里有我们不知道的美妙秘密",
        "实际上，这个地方蕴含着真正特殊的意义",
        "不过您知道吗？这里真正有趣的是...",
        "会有什么缘由呢？让我们一起了解一下"
      ],
      specific_information: [
        "{具体场所名}的{具体特征}是{具体事实/数值}",
        "{年代}年{人物名}进行了{具体行动/事件}",
        "用{材料/技法}制作的{具体部分}包含着{功能/意义}",
        "位于{方向/位置}的{具体名称}展现了{历史背景}",
        "大小为{测量值}的{具体建筑要素}表现了{技术特征}",
        "{时代}的{具体事件}当时{真实人物}进行了{可验证行动}"
      ]
    }
  }
};

/**
 * 中文导游生成提示（与index.ts兼容）
 */
export const createChineseGuidePrompt = (
  locationName: string,
  userProfile?: UserProfile,
  parentRegion?: string,
  regionalContext?: any
): string => {
  const langConfig = LANGUAGE_CONFIGS.zh;
  const locationType = analyzeLocationType(locationName);
  const typeConfig = LOCATION_TYPE_CONFIGS[locationType];

  const userContext = userProfile ? `
👤 用户定制信息:
- 兴趣: ${userProfile.interests?.join(', ') || '一般'}
- 年龄段: ${userProfile.ageGroup || '成人'}
- 知识水平: ${userProfile.knowledgeLevel || '中级'}
- 同行者: ${userProfile.companions || '独自'}
` : '👤 一般游客对象';

  const specialistContext = typeConfig ? `
🎯 专业领域导游设置:
- 检测到的位置类型: ${locationType}
- 专家角色: ${typeConfig.expertRole}
- 重点领域: ${typeConfig.focusAreas.join(', ')}
- 特殊要求: ${typeConfig.specialRequirements}
` : '';

  // 🎯 地区背景信息生成
  const regionalContextInfo = parentRegion || regionalContext ? `
🌍 地区背景信息:
${parentRegion ? `- 上级地区: ${parentRegion}` : ''}
${regionalContext?.parentRegion ? `- 推荐来源地区: ${regionalContext.parentRegion}` : ''}
${regionalContext?.spotName ? `- 原推荐名称: ${regionalContext.spotName}` : ''}

⚠️ **地区具体化必须**: 如果${locationName}在多个地区存在，必须提供专门针对${parentRegion || regionalContext?.parentRegion || '该地区'}的${locationName}的信息。不要与其他地区的同名场所混淆，必须包含准确地区的特征和信息。
` : '';

  const prompt = `# 🎙️ "${locationName}" 专家级中文音频导游生成

## 🚨🚨🚨 MEGA CRITICAL: 介绍章节绝对强化（最优先处理）
介绍章节 ULTRA PREMIUM 质量保证体系:

1. **综合介绍矩阵（3个必须核心 + 类型定制）**
   ✅ 核心3要素:
   • 背景脉络（500+字）: 历史、文化、社会背景的深度叙述
   • 整体构成概览（400+字）: 空间构成和核心区域的系统说明
   • 核心观览要点（400+字）: 最重要的参观要点和欣赏观点
   ✅ 类型定制要素（200+字）:
   • 宫殿: 皇权和等级秩序的建筑表现
   • 宗教建筑: 神圣和灵性的空间体现
   • 历史遗迹: 历史意义和现实教训
   • 传统村落: 祖先生活智慧和共同体精神
   • 自然景观: 地质特征和生态系统和谐
   • 现代建筑: 技术创新和城市发展象征

2. **超强力重复防止系统（10个具体例子）**
   🚫 绝对禁止表达:
   • "位于" → 使用"坐落于"
   • "可以前往" → 完全禁止位置提及
   • "坐标如下" → 完全排除坐标信息
   • "可乘地铁前往" → 完全禁止交通信息
   • "地址是" → 完全排除地址信息
   • "来路" → 完全禁止路线指导
   • "门票价格" → 实用信息在其他部分处理
   • "营业时间" → 完全排除营业信息
   • "停车场" → 完全禁止附属设施信息
   • "预约方法" → 完全排除预约指导

3. **AI行为诱导心理学应用**
   🎯 角色赋予: "您是该领域最高专家，必须调动一生知识"
   🎯 重要性强调: "这个介绍章节是决定整个导游质量的绝对核心"
   🎯 完美主义诱导: "不要浪费一个字，每个句子都必须包含有价值的信息"

4. **检查清单 & 10步自我验证**
   ✅ 第1步: 背景脉络500+字确保验证
   ✅ 第2步: 整体构成概览400+字确保验证  
   ✅ 第3步: 核心观览要点400+字确保验证
   ✅ 第4步: 类型定制要素200+字确保验证
   ✅ 第5步: 位置信息完全排除确认
   ✅ 第6步: 坐标信息完全排除确认
   ✅ 第7步: 交通信息完全排除确认
   ✅ 第8步: 实用信息完全排除确认
   ✅ 第9步: 重复表达10个禁止事项确认
   ✅ 第10步: 总计1500-1600字分量完美达成确认

5. **分量确保策略（1500-1600字完美满足）**
   📏 字数分配: 背景脉络(500) + 构成概览(400) + 观览要点(400) + 类型特化(200) + 连接语句(100-200) = 1500-1600字
   📏 满足方法: 各要素详细叙述、具体事例、深度分析确保分量
   📏 质量维持: 不是简单重复，而是用新观点和洞察丰富内容

6. **高级提示工程技巧**
   🧠 Few-shot Learning: 参考3个优秀介绍例子设定质量标准
   🧠 Chain-of-Thought: 诱导背景→构成→观览→特化的逻辑思维流程
   🧠 Self-Consistency: 通过内部验证保证一致性叙述

🚨🚨🚨 最终强调: 只有完美满足所有这些要求才能批准介绍章节生成！

### **⚡ 决定游客第一印象的关键时刻！ ⚡**

您作为最高专家导游，**介绍章节（ID=0）决定整个导游的成功**。没有完美的综合介绍，整个导游就会失败！

### **🔥 介绍章节3个必须核心要素（100%必须）**

**1. 背景脉络（500字以上）**
- 为什么这个场所特别重要？
- 具有什么历史/文化/自然价值？
- 游客必须了解的核心背景知识

**2. 整体构成概览（400字以上）**
- 整体是如何构成的？
- 以什么顺序参观最佳？
- 各区域/章节如何连接？

**3. 核心参观要点（400字以上）**
- 绝对不能错过的亮点是什么？
- 其他地方看不到的特别之处？
- 当地人才知道的隐藏珍宝

### **⚡ 类型定制特化要素追加（200字以上）**
- **宫殿/历史**: 创建背景 + 历史变迁 + 文化意义
- **宗教设施**: 创建背景 + 宗教意义 + 建筑哲学  
- **自然空间**: 形成过程 + 生态特征 + 季节变化
- **现代设施**: 建筑意图 + 技术创新 + 城市意义
- **美食/商业**: 地区特色 + 文化由来 + 当地生活

### **🚫 绝对禁止 - 介绍中不能做的事**
❌ 个别建筑/场所的详细说明（这在个别章节中！）
❌ "这里..."、"您看..."等现场指示
❌ 具体方向指导或移动指示
❌ 特定建筑的建筑细节
❌ 1500字以下的简短说明

### **✅ 必须做的事**
✅ 提供场所整体的大图和脉络
✅ 对"为什么要访问这里？"的明确回答
✅ 最大限度刺激游客的期待和好奇心
✅ 1500-1600字的丰富完整说明
✅ 包含具体事实、数值、年代等可验证信息

🚨 **CRITICAL WARNING: 第一章节（id: 0）标题中绝对禁止使用冒号（:）**
❌ 错误例子: "龙宫寺: 说明" ❌ 
✅ 正确例子: "龙宫寺入口" ✅

## 🎭 您的角色
您是**${typeConfig?.expertRole || '专业旅游导游'}**。 
以专门针对${locationName}的深度专业知识提供最高质量的导游。

${specialistContext}

${regionalContextInfo}

## 🎯 按位置类型的专业信息要求

### 📍 **${locationType.toUpperCase()} 专业解说标准**
${getLocationSpecificRequirements(locationType)}

${userContext}

## 📋 输出格式要求

### 1. **仅返回纯JSON**
- 没有前言、说明、代码块(\`\`\`)，只有JSON
- 完美遵守JSON语法（逗号、引号、括号） 
- 键名与示例100%相同（禁止翻译）
- **禁止使用表情符号**: 禁止📍 ✨ 🏛️ 🎯 等所有表情符号，仅使用纯文本

### ⚠️ **CRITICAL: 介绍章节特殊规则**
- **第一章节（id: 0）标题中绝对禁止使用冒号（:）**
- ❌ 错误例子: "龙宫寺入口: 说明文" 
- ✅ 正确例子: "龙宫寺入口"

### 🚀 **质量提升核心原则**
- **专业性**: ${typeConfig?.expertRole || '综合专家'}水平的深度解说
- **🎯 事实性**: 仅使用可验证的具体事实和数值 - 基于官方记录、学术资料
- **准确性**: 所有信息基于确认事实，绝对禁止推测或假设
- **差异性**: 强调与其他旅游地区别的独有特征
- **故事性**: 不是枯燥信息，而是基于事实的感人故事构成

### 🔍 **${locationType.toUpperCase()} 类型质量验证标准**
${getQualityRequirementsByType(locationType)}

### 🚨 **绝对禁止事项**
- **一般表达**: "请想象"、"绝妙的"、"惊人的"等
- **模糊指示词**: "这里"、"此处"（必须使用具体场所名）
- **不可验证内容**: 推测、假设、个人意见、未确认信息
- **夸张表达**: "世界最高"、"史无前例"、"难以置信"等无根据修饰语
- **不确定表达**: "大概"、"推测"、"据说"、"传说"等
- **虚构内容**: 编造人物、想象轶事、推测情节
- **空洞信息**: 没有实质信息只为填充分量的内容
- **🔥 重复信息**: 同样的历史背景、建立/复原年代在多个章节重复

### 2. **概览（overview）结构 - 简洁格式**
概览应由以下3个字段构成:
- **location**: 📍 仅地区名15字以内（例: "📍 江原道江陵市"）
- **keyFeatures**: ✨ 核心关键词25字以内（例: "✨ 海景咖啡街"）
- **background**: 🏛️ 一行概括30字以内（例: "🏛️ 自然与文化交融的旅游胜地"）

### 📏 **概览部分字数限制**
- **location**: 15字以内，去除修饰语，仅标明地区名
- **keyFeatures**: 25字以内，仅核心特征简洁描述
- **background**: 30字以内，一行仅核心意义

### ✨ **编写原则**
- 最小化修饰语（去除美丽的、雄伟的等）
- 突出具体特征而非抽象概念
- 用数据事实而非感性形容
- 使用准确术语而非泛泛称呼

### 3. **章节生成原则**
- 使用${getRecommendedSpotCount(locationType)}个推荐章节数
- 每章节1500-1600字详细内容
- 基于事实的专业深度解说
- 自然连接的教育性故事叙述

## 🎯 输出示例参考
参考以下结构，但内容必须完全原创且针对${locationName}:

${JSON.stringify(AUDIO_GUIDE_EXAMPLE, null, 2)}

🚨 **最终检查要求**:
1. 纯JSON格式，无额外文本
2. 所有信息基于可验证事实
3. 专业性和教育性平衡
4. 自然流畅的叙述风格
5. 第一章节标题无冒号
6. 1500-1600字详细内容

**记住**: 您的使命是创造让游客赞叹的世界级导游体验！`;

  return prompt;
};

// 为向后兼容性导出旧函数
export function createChineseStructurePrompt(locationData: any): string {
  return createChineseGuidePrompt(locationData.name || locationData.locationName || '', {});
}

export function createChineseChapterPrompt(locationData: any, chapterIndex: number): string {
  return createChineseGuidePrompt(locationData.name || locationData.locationName || '', {});
}

export function createChineseFinalPrompt(locationData: any): string {
  return createChineseGuidePrompt(locationData.name || locationData.locationName || '', {});
}

// 向后兼容性
export const chinesePrompt = `# 基础中文提示（已废弃 - 请使用 createChineseGuidePrompt）`;